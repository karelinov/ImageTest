package Application;

import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.net.InetSocketAddress;

import javax.imageio.ImageIO;

import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpServer;

class Application {

   public static void main(String[] args) throws IOException {
       int serverPort = 8000;
       HttpServer server = HttpServer.create(new InetSocketAddress(serverPort), 0);
       /*
       server.createContext("/api/hello", (exchange -> {
           String respText = "Hello!";
           exchange.sendResponseHeaders(200, respText.getBytes().length);
           OutputStream output = exchange.getResponseBody();
           output.write(respText.getBytes());
           output.flush();
           exchange.close();
       }));
       */
       server.createContext("/api/hello", (exchange -> hello(exchange)));
       server.setExecutor(null); // creates a default executor
       server.start();
   }
   
   private static void hello(HttpExchange exchange) throws IOException {
	   String respText="Hello!";	   
       exchange.sendResponseHeaders(200, respText.getBytes().length);
       OutputStream output = exchange.getResponseBody();
       output.write(respText.getBytes());
       output.flush();
       exchange.close();
   }
   
   private static void CreateImage(HttpExchange exchange) throws IOException {
	   BufferedImage bufferedImage = ImageCreator.CreateImage();
	   ByteArrayOutputStream os = new ByteArrayOutputStream();
	   ImageIO.write(image, "jpg", os);
	   return os.toByteArray();	   
	   
	   String respText = "Hello!";
       exchange.sendResponseHeaders(200, respText.getBytes().length);
       OutputStream output = exchange.getResponseBody();
       output.write(os.toByteArray());
       output.flush();
       exchange.close();
   }
   
   
}